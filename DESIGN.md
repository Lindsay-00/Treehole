# Premise of the project
It happens pretty often that we get burnt out mentally and feel like there’s no one to talk to. The Tree Hole aims to mitigate this problem by giving users a safe space to voice their troubles, concerns, and confessions, and interact with other users without having to be identified. We know that anonymous forums are nothing new e.g. Librex, but our website is different in the sense that there are several features of our design that strive to do what Librex cannot, including timer delete, managing one’s own posts, and searching for posts (all detailed below), to create the space most in line with our intentions.

# Setting up
After taking a (very long) detour to Django, we decided to use python and flask for our forum. We realized the scope of our project was not big enough to warrant the learning of a completely new framework, and all our functionalities would be achievable through flask.

# Implementing of Core Functions
1. User registration, login, and reset password
    Initially, we thought since posts would all be anonymous, users would not need to register an account before posting, and this would also minimize data security issues especially if our aim is to create a forum where users feel safe to speak what they wouldn’t in other platforms. We would still be able to track their posts with post-id. But we realized later that (1) without an account, it would be hard for users to directly see comments they’ve received, nor can they manage their own posts at all; (2) since this is an open forum, a register/login function would give users a “barrier to entry” for them to be more mindful of their posts while being authentic; (3) this would also allow us to track users who are abusing the website; (4) as for privacy issues, even if we don’t ask users to register, their IP address would still be recorded so there’s no complete privacy anyway. Having this register/login feature would actually enable us to prevent more abuse.

2.Post, reply, and display comments
    We primarily made use of SQL commands here in order to store, fetch and display users’ posts here. We created a separate table for comments because if we created a column in posts called “comments”, it either (1) assumes there will be only one comment to each post or (2) means every comment will be jumbled into one space which makes an orderly display of each comment very challenging. So we separated the database for comments and posts and linked them through post_id.
    Users are able to post any content that they don’t want to talk about in reality. They can also view and comment on other people’s posts. In addition, we have created a delete function so that if users feel that they have posted something inappropriate or they have changed their minds, they can choose to delete their own posts at any time.
    We also implemented an error prevention mechanism to prevent empty posts. (empty title and/or body)

3.Timer function
    We implemented a timer function that calculates a time delta object i.e. the time difference between a post being posted and the current time when the user accesses the page. If that time difference is greater than 24 hours, this post will be deleted. We acknowledge that a more intuitive & efficient approach would be to delete all content from the “post” table every 24 hours, but that would require setting a timer on, consequently, a server that perpetually runs. Unfortunately, the constraints imposed by this project ruled out the possibility for a server that runs perceptually, so this seems like the most effective approach to implement our desired function within the scope of our project.

# Additional Features
1. Edit & delete own posts
    Confirm deletion feature added: to prevent accidental deletes/misclicks
    Edit: we added an edit post function so that the user can edit their own posts already made. The corresponding comments, post ID, and timestamp created would stay the same, however. The original title and body of the post are passed in as values of the input box to make it easier for the user to add onto/delete from their existing post content.
    The edit function was a bit tricky to implement, since it involved not only another html page where users can edit the content, but also getting the post_id from somewhere else to be passed into the function so that the corresponding post information can be updated in the database. We eventually decided to separate the GET and POST function so that the user can first get the post_id from the previous page (/history, or “My Posts”) to have that in the URL of the edit page, and pass that post_id into the function using the query string of the URL so that it can be used as a variable to update the database with a POST method. This would result in the post_id being displayed directly in the edit page’s URL, though, so we implemented an error scenario when someone tries to edit a post that is not made by them. When the author_id of the post that’s being edited doesn’t match the user_id stored in session, the page will return an “Access Denied” apology.

2. Keyword search function
    We implemented a keyword search function in case users want to search for existing posts made on any topic of concern (e.g. to find comfort during finals period, they can simply search “finals,” and all the posts that include this keyword in either the title or the body will show up). In the search results page, the user will be able to comment on the posts directly.
    The search function was implemented through getting the keyword from user input as a variable, using an SQL statement to select all the posts in the table that include this keyword either in the title or the body, and displaying them in a separate search results page with a Jinja loop (similar to how index is displayed).

3. Welcome page, login & register page sequencing
    Originally, once the user finishes registration they will be directed back to the login page to login again, before they can enter the homepage. Later we improved this by removing such redundancy and letting users directly into the homepage once they finish registration.
    We also used to always direct the user to the login page from the welcome page through the button at the bottom, but decided that it was inconvenient for users who are already logged in. We improved this by directing users straight to the index page with all the posts when there is a user_id already stored in session; if not, it will still lead them to the login page.

4. Dark mode
    We implemented a dark mode function because we anticipate the environment where users access this forum would be likely in a private space e.g. at night, and such display would make the content more visually accessible.


# How to prevent abuse?
One main challenge for our website is to prevent abuse, which is especially important since its very purpose is to provide a safe space for people to speak their hearts. Such abuse prevention comes in the “before” and “after “ stage.
In the “before” stage, we try to prevent such abuse from happening by first letting users sign a contract (i.e. the welcome page) before they are allowed to enter the website. We also make it clear that we reserve the right to delete any inappropriate content without prior notice so users would exercise their discretion. Also, all content will be deleted 24 hours so the effect of inappropriate content will be relatively limited.
However, we can’t just trust people’s good judgment alone, nor can we ignore the effect of a bad post - 24 hours is still a lot of time. So in the “after” stage, we also implemented features where we can respond to inappropriate content and remove them. We can directly delete specific content and/or comments from the database by SQL commands at the backend. The fact that the user can delete/edit their own posts but not their comments to other posts makes the user more mindful of the potential consequences that they face by leaving comments, since they’re usually directed to others’ posts.
We are limited in how much content we can attend to, so we also implemented a report abuse feature. This feature is to allow users to report any disturbing content they see. It can be other people’s posts or comments. By clicking the link on the about page, they will be able to email us and talk about their concerns. Then we will check the content manually and delete the inappropriate content. Originally we simply put our emails up without putting the link, but we decided to put a link where users can click on and email us directly rather than having to open their own email and copy & paste our email addresses manually, to improve user experience and lower barrier to report.
We didn’t allow users to be able to delete others’ posts because this, again, could be abused. We have to achieve a balance between respecting everyone’s right to speak out and prohibiting inappropriate content. At this stage, we believe that the best strategy is not to blindly filter out any keyword-related posts/comment but to understand them in their context and then determine whether they should be kept.